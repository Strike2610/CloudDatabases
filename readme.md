# Cloud Databases assignment

## Installation

This project utilized Azurite so use Azure Storage Explorer for easy access to the data.

In the following location, make a table called `product-thumbnails`.
`Emulator & Attached > Storage Accounts > (Emulator - Default Ports) (Key) > Blob`
Dump the images in `/images` in this blob for everything to function as it should.

For the remainder of the database, follow the steps detailed [here](https://learn.microsoft.com/en-us/sql/ssms/quickstarts/ssms-connect-query-sql-server) to get a database instance running and to be able to view it, then open the Package Manager Console and run `Update-Database` to create the database with all mock content.

## Usage

Below, each end point is explained with usage.\
This project contains an insomnia export for easy usage.

### Get Product Info `/products/{id}`

An endpoint to get information on the items available as well as links to a respective thumbnail.\
Currently the database contains 3 items and a valid ID are generated on migration.

### Place Order `/orders/place`

By posting a JSON body like below, an order can be input in the system.

```json
{
	"Product": d649825a-c006-4d8c-9145-c6a74a6080e8,
	"Customer": "Lara Croft",
	"Address": "142 Abbingdon Road"
}
```

### Ship Order `/orders/ship/{id}`

This endpoint checks if the provided order exists and if so, attempts to ship it.\
The nessecery ID is autogenerated by the database when the data is inserted, so it is nessecery to manually look one up to ship an order.

### Post Comment `/comments/{id}`

You can place comments on products by simply replace `{id}` with the product ID.
And adding a plain text body with the comment.

## Assignment

This Repo contains (the work in progress of) the following assignment:

> Widget and Co - product widget - have decided to transfer their website from a local ISP hosting company to the cloud. The site has become very popular during the past few years and can experience heavy loads at peak hours. It is suggested that the move to Azure could alleviate some of the occurring problems.
> 
> During peak hours a huge amount of traffic is generated by online users who place their orders. In the past the order placing process has been the main culprit in the sluggish performance of the website.
> 
> The orderdate is stored; after an order is shipped the shipping date is again stored - these are used to calculate orderprocessed metric.
> 
> As Widget and Co is part of the conglomerate Wiley and Co the user info is shared with another department.
> 
> The product specification is kept in a traditional SQL database, Images of the product are also stored.
> 
> The site also runs a forum part where users can post reviews of the products (anonymously) - at a later stage the marketing department would use the reviews to profile a new range of products.
> 
> _**Your task:**_
> 
> The Online web store will be hosted (and run) in a cloud environment (Azure). Design a proof of concept (in C# Web API with at least 2 Azure Functions) of the application where special attention is paid to the design of the Cloud Database architecture.
> 
> The proof of concept does not require a front end!
